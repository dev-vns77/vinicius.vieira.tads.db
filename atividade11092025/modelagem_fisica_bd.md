CREATE TABLE FORNECEDORES (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    CNPJ NUMBER NOT NULL
);

CREATE TABLE CLIENTES (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    ENDERECO VARCHAR2(100) NOT NULL,
    CPF NUMBER,
    CNPJ NUMBER,
    TICKETMEDIO NUMBER,
    CONSTRAINT chk_cpf_cnpj CHECK (
        (CPF IS NOT NULL AND CNPJ IS NULL) OR
        (CNPJ IS NOT NULL AND CPF IS NULL)
    )
);

CREATE TABLE FUNCIONARIOS (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    CARGO VARCHAR2(100) NOT NULL,
    CPF NUMBER NOT NULL,
    ENDERECO VARCHAR2(100) NOT NULL
);

CREATE TABLE TRANSPORTADORAS (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    REGIAO VARCHAR2(100) NOT NULL,
    TICKETMEDIO NUMBER,
    CNPJ NUMBER NOT NULL,
    ENTREGASREALIZADAS NUMBER
);

CREATE TABLE TIPO (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL
);

CREATE TABLE PRODUTOS (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    PRECOKG NUMBER NOT NULL,
    LOTE NUMBER NOT NULL,
    TIPO_ID NUMBER,
    ESTOQUEMEDIO NUMBER NOT NULL,
    ESTOQUEMINIMO NUMBER NOT NULL,
    ESTOQUEMAXIMO NUMBER NOT NULL,
    CONSTRAINT fk_produtos_tipo FOREIGN KEY (TIPO_ID) REFERENCES TIPO(ID)
);

CREATE TABLE MATERIAPRIMA (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    ESTOQUEMINIMO NUMBER NOT NULL,
    ESTOQUEMEDIO NUMBER NOT NULL,
    ESTOQUEMAXIMO NUMBER NOT NULL,
    FORNECEDOR_ID NUMBER,
    CONSTRAINT fk_materiaprima_fornecedor FOREIGN KEY (FORNECEDOR_ID) REFERENCES FORNECEDORES(ID)
);

CREATE TABLE PEDIDOS (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    DATAPEDIDO DATE NOT NULL,
    DATAENTREGA DATE NOT NULL,
    PRODUTO_ID NUMBER,
    TRANSPORTADORA_ID NUMBER,
    FUNCIONARIO_ID NUMBER,
    CLIENTE_ID NUMBER,
    CONSTRAINT fk_pedidos_produto FOREIGN KEY (PRODUTO_ID) REFERENCES PRODUTOS(ID),
    CONSTRAINT fk_pedidos_transportadora FOREIGN KEY (TRANSPORTADORA_ID) REFERENCES TRANSPORTADORAS(ID),
    CONSTRAINT fk_pedidos_funcionario FOREIGN KEY (FUNCIONARIO_ID) REFERENCES FUNCIONARIOS(ID),
    CONSTRAINT fk_pedidos_cliente FOREIGN KEY (CLIENTE_ID) REFERENCES CLIENTES(ID)
);
